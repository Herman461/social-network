(this["webpackJsonpsocial-network-app"]=this["webpackJsonpsocial-network-app"]||[]).push([[4],{243:function(e,t,s){"use strict";s.r(t);var r=s(2),n=s(3),a=s(4),c=s(7),i=s(8),o=s(0),l=s.n(o),u=s(13),g=s(1),j=l.a.memo((function(e){console.log("RENDER:"),console.log(e);return Object(g.jsx)("form",{action:"#",className:"users__seacrh search-users",children:Object(g.jsx)("div",{className:"search-users__input",children:Object(g.jsx)("input",{value:e.searchText,className:"input",onChange:function(t){e.updateUsersSearch(t.target.value),e.filterUsers()},placeholder:"\u041f\u043e\u0438\u0441\u043a \u0434\u0440\u0443\u0437\u0435\u0439",type:"text"})})})})),h=s(35),d=function(e){for(var t=Math.ceil(e.totalUsersCount/e.pageSize),s=[],r=1;r<=t;r++)s.push(r);var n=s.map((function(t,s){return e.totalUsersCount-7<e.selectedPage?e.totalUsersCount-8>s?null:t===e.selectedPage+7?Object(g.jsx)("li",{children:Object(g.jsx)("a",{href:"",className:"paging__item",children:"..."})}):Object(g.jsx)("li",{children:Object(g.jsx)("a",{href:"",onClick:function(s){return e.onPageClick(s,t)},className:"paging__item".concat(t===e.selectedPage?" _active":""),children:t})}):e.selectedPage+6<s||e.selectedPage-2>s?null:t===e.selectedPage+7?Object(g.jsx)("li",{children:Object(g.jsx)("a",{href:"",className:"paging__item",children:"..."})}):Object(g.jsx)("li",{children:Object(g.jsx)("a",{href:"",onClick:function(s){return e.onPageClick(s,t)},className:"paging__item".concat(t===e.selectedPage?" _active":""),children:t})})}));return Object(g.jsx)("div",{className:"users__pages",children:Object(g.jsxs)("div",{className:"paging",children:[Object(g.jsx)("a",{href:"",onClick:function(t){return function(t){t.preventDefault(),e.selectedPage>1&&e.setSelectedPage(e.selectedPage-1)}(t)},className:"paging__arrow paging__arrow_previous"}),Object(g.jsx)("ul",{className:"paging__list",children:n}),Object(g.jsx)("a",{href:"",onClick:function(t){return function(t){t.preventDefault(),e.setSelectedPage(e.selectedPage+1)}(t)},className:"paging__arrow paging__arrow_next"})]})})},f=s(14),p=function(e){return e.usersPage.text},b=function(e){return e.usersPage.totalUsersCount},O=function(e){return e.usersPage.filteredUsers},m=function(e){return e.usersPage.isFetching},_=function(e){return e.usersPage.followingInProgress},x=function(e){return e.usersPage.selectedPage},P=function(e){return e.usersPage.pageSize},v=function(e){return e.usersPage.pageNeighbours},C=function(e){Object(c.a)(s,e);var t=Object(i.a)(s);function s(){var e;Object(n.a)(this,s);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).onPageClick=function(e,t){},e}return Object(a.a)(s,[{key:"render",value:function(){return Object(g.jsx)(d,{selectedPage:this.props.selectedPage,totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,setSelectedPage:this.props.setSelectedPage,onPageClick:this.onPageClick,pageNeighbours:this.props.pageNeighbours})}}]),s}(l.a.Component),N=Object(u.b)((function(e){return{selectedPage:x(e),totalUsersCount:b(e),pageSize:P(e),pageNeighbours:v(e)}}),{setSelectedPage:f.n,setUsers:f.o,toggleIsFetching:f.r})(C),U=s(80),k=s(20),w=function(e){return Object(g.jsxs)("li",{className:"users__item item-users",children:[Object(g.jsxs)("div",{className:"item-users__body",children:[Object(g.jsx)(k.b,{to:"/profile/"+e.user.id,className:"item-users__ava",children:Object(g.jsx)("img",{src:e.user.ava?e.user.ava:U.a,alt:""})}),Object(g.jsx)("div",{className:"item-users__content",children:Object(g.jsxs)("div",{className:"item-users__info info-users",children:[Object(g.jsx)("div",{className:"info-users__name",children:e.user.username}),Object(g.jsx)("div",{className:"info-users__status",children:e.user.status})]})})]}),Object(g.jsx)("button",{className:"item-users__button",disabled:e.followingInProgress.some((function(t){return e.user.id===t})),onClick:function(){return e.toggleFollowThunkCreator(e.user.id,e.user.followed)},children:e.user.followed?"\u0412 \u0434\u0440\u0443\u0437\u044c\u044f\u0445":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0434\u0440\u0443\u0437\u044c\u044f"})]})},S=s(52),T=function(e){var t=e.filteredUsers.map((function(t){return Object(g.jsx)(w,{user:t,toggleFollowThunkCreator:e.toggleFollowThunkCreator,followingInProgress:e.followingInProgress},t.id)}));return Object(g.jsxs)("div",{className:"users",children:[Object(g.jsx)("div",{className:"users__title",children:"Users"}),Object(g.jsx)(N,{}),Object(g.jsx)(j,{filterUsers:e.filterUsers,updateUsersSearch:e.updateUsersSearch,searchText:e.searchText}),e.isFetching?Object(g.jsx)(S.a,{}):Object(g.jsx)("ul",{className:"users__items",children:t})]})},y=h.create({baseURL:"http://localhost:4000/",withCredentials:!0}),F=function(e,t){return y.put("api/follow/"+e,{followed:!t}).then((function(e){return e.data}))},I=function(){return y.get("api/users").then((function(e){return e.data}))},z=function(e){Object(c.a)(s,e);var t=Object(i.a)(s);function s(){return Object(n.a)(this,s),t.apply(this,arguments)}return Object(a.a)(s,[{key:"componentDidMount",value:function(){this.props.getUsersThunkCreator()}},{key:"render",value:function(){return Object(g.jsx)(T,Object(r.a)({},this.props))}}]),s}(l.a.Component),D=Object(u.b)((function(e){return{searchText:p(e),totalUsersCount:b(e),filteredUsers:O(e),isFetching:m(e),followingInProgress:_(e)}}),{filterUsers:f.l,updateUsersSearch:f.s,getUsersThunkCreator:function(){return function(e){e(Object(f.r)()),I().then((function(t){e(Object(f.r)()),e(Object(f.o)(t.items))}))}},toggleFollowThunkCreator:function(e,t){return function(s){s(Object(f.q)(!0,e)),F(e,t).then((function(t){s(Object(f.q)(!1,e)),0===t.resultCode&&s(Object(f.p)(e))}))}}})(z);t.default=D}}]);
//# sourceMappingURL=4.fa2121e6.chunk.js.map